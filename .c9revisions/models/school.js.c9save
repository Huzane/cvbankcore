{"ts":1380277946053,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var _ = require(\"underscore\");\n\nvar schoolDb = require('./schools/school-db.js');\nvar SchoolModel = schoolDb.SchoolModel;\nvar schooluserDb = require('./schools/school-users.js');\n\nvar SchoolUser = require('./schooluser').SchoolUser;\n\nvar mUtils = require('../lib/utilities.js');\n\nvar util = require('util');\n\nvar SchoolUserModel = schooluserDb.SchoolUserModel;\n\nfunction School(){\n    \n}\n\n\nmodule.exports.School = School;"]],"start1":0,"start2":0,"length1":0,"length2":421}]],"length":421}
{"contributors":[],"silentsave":false,"ts":1380283494692,"patch":[[{"diffs":[[0,"){\n    \n"],[1,"    School.prototype.create = function(property, callback){\n        \n    };\n"],[0,"}\n\n\nmodu"]],"start1":378,"start2":378,"length1":16,"length2":92}]],"length":497,"saved":false}
{"ts":1380284139212,"patch":[[{"diffs":[[0,"pert"],[-1,"y, callback"],[1,"ies, callback){\n     try {\n\t\tmUtils.requireProperties(properties, ['shortName', 'longName', 'email', 'phone', 'address']);\n\t}catch (ex) {\n\t\tcallback(ex);\n\t\treturn;\n\t}  \n\t\n\tvar that = this;\n\tSchoolModel.findOne({shortName: new RegExp('^' + properties.shortName + '$', 'i')}, '_id', function(err, d"],[0,"){\n"],[1,"\t"],[0,"   "],[-1,"     "],[1,"if(d){\n\t       callback(util.format('A school named \\'%s\\' already exists', properties.shortName));\n\t   } else {\n\t       var school = SchoolModel(properties);\n\t       school.save(function(err, company){\n\t          if(err) {\n\t              callback(err);\n\t          }else{\n\t              callback(school !== null ? school.toJSON() : null);  \n\t          }\n\t       });\n\t       \n\t   }\n\t});\n\t\n\t"],[0,"\n   "]],"start1":428,"start2":428,"length1":30,"length2":700}]],"length":1167,"saved":false}
{"ts":1380284159724,"patch":[[{"diffs":[[0," \n\t\n"],[-1,"\tvar that = this;\n"],[0,"\tSch"]],"start1":599,"start2":599,"length1":26,"length2":8}]],"length":1149,"saved":false}
